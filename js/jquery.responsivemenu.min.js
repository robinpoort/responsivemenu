/* @preserve
 * Mobile first responsive menu
 * Copyright 2013 Robin Poort
 * http://www.robinpoort.com
 */
"use strict";(function($){$.responsiveMenu=function(element,options){var defaults={menuElement:$(element),toggleButtonClass:"menu_toggle_button",toggleButtonNameClosed:"≡",toggleButtonNameOpen:"≡",toggleButtonLocation:"before",subToggleClass:"sub_toggle",subToggleNameClosed:"+",subToggleNameOpen:"-",subToggleLocation:"after",subToggleListClass:"rm-subMenu",classNameClosed:"rm-closed",classNameOpen:"rm-open",animations:true,animationSpeed:200},plugin=this;plugin.settings={};var $element=$(element),element=element;plugin.init=function(){plugin.settings=$.extend({},defaults,options);$.fn.accessibleHide=function(){this.addClass("accessible-hide")};$.fn.accessibleShow=function(){this.removeClass("accessible-hide")};if(!$(plugin.settings.toggleButtonClass).length){var toggleButtonMarkup='<div class="'+plugin.settings.toggleButtonClass+" "+plugin.settings.classNameClosed+'">'+plugin.settings.toggleButtonNameClosed+"</div>";if(plugin.settings.toggleButtonLocation=="after"){$(plugin.settings.menuElement).after(toggleButtonMarkup).parent().find("."+plugin.settings.toggleButtonClass).accessibleHide()}else{$(plugin.settings.menuElement).before(toggleButtonMarkup).parent().find("."+plugin.settings.toggleButtonClass).accessibleHide()}}if(!$(plugin.settings.subToggleClass).length){var subToggleMarkup='<span class="'+plugin.settings.subToggleClass+" "+plugin.settings.classNameClosed+'">'+plugin.settings.subToggleNameClosed+"</span>";if(plugin.settings.subToggleLocation=="before"){$(plugin.settings.menuElement).find("li").has("ul").find(">a").before(subToggleMarkup).find(plugin.settings.subToggleClass).accessibleHide()}else{$(plugin.settings.menuElement).find("li").has("ul").find(">a").after(subToggleMarkup).find(plugin.settings.subToggleClass).accessibleHide()}}var menuElem=plugin.settings.menuElement,menuSubElem=$(menuElem).find("li>ul"),toggleButton=$(menuElem).siblings("."+plugin.settings.toggleButtonClass),subToggle=$(menuElem).find("."+plugin.settings.subToggleClass),animationSpeed=plugin.settings.animationSpeed;if(plugin.settings.animations==false){animationSpeed=1}function addBodyClass(width,bodyZIndex){if(bodyZIndex==0){$("body").removeClass("menu-unfolded").addClass("menu-folded")}else{$("body").removeClass("menu-folded").addClass("menu-unfolded")}}function toggleButtons(width,bodyZIndex){if(plugin.settings.beforeMenuHide){plugin.settings.beforeMenuHide()}if(bodyZIndex==0){if(toggleButton.hasClass(plugin.settings.classNameClosed)){$(menuElem).accessibleHide()}if(toggleButton.hasClass("accessible-hide")){toggleButton.accessibleShow()}if(!subToggle.hasClass(plugin.settings.classNameOpen)){$(menuSubElem).accessibleHide()}if(subToggle.hasClass("accessible-hide")){subToggle.accessibleShow()}}if(bodyZIndex==1){subToggle.removeClass(plugin.settings.classNameOpen).addClass(plugin.settings.classNameClosed).html(plugin.settings.subToggleNameClosed);$(menuElem).accessibleShow();toggleButton.accessibleHide();if($(menuSubElem).hasClass("accessible-hide")){$(menuSubElem).accessibleShow()}subToggle.accessibleHide()}if(plugin.settings.afterMenuHide){plugin.settings.afterMenuHide()}}$(window).on("resize ready",function(event){var width=event.target.innerWidth||$("body").width(),bodyZIndex=$("body").css("z-index");toggleButtons(width,bodyZIndex);addBodyClass(width,bodyZIndex)});toggleButton.click(function(){if(plugin.settings.beforeMainToggle){plugin.settings.beforeMainToggle()}if($(menuElem).hasClass("accessible-hide")){$(menuElem).accessibleShow();$(menuElem).hide().slideDown(animationSpeed,function(){$(menuElem).removeAttr("style");if(plugin.settings.afterMainToggle){plugin.settings.afterMainToggle()}$(window).trigger("resize")});$(toggleButton).removeClass(plugin.settings.classNameClosed).addClass(plugin.settings.classNameOpen).html(plugin.settings.toggleButtonNameOpen)}else{$(menuElem).slideUp(animationSpeed,function(){$(menuElem).removeAttr("style");$(menuElem).accessibleHide();if(plugin.settings.afterMainToggle){plugin.settings.afterMainToggle()}$(window).trigger("resize")});$(toggleButton).removeClass(plugin.settings.classNameOpen).addClass(plugin.settings.classNameClosed).html(plugin.settings.toggleButtonNameClosed)}});subToggle.click(function(){if(plugin.settings.beforeSubToggle){plugin.settings.beforeSubToggle()}if($(this).siblings("ul:not(.accessible-hide)").length){$(this).siblings("ul").slideUp(animationSpeed,function(){$(this).removeAttr("style").accessibleHide();if(plugin.settings.afterSubToggle){plugin.settings.afterSubToggle()}$(window).trigger("resize")});$(this).removeClass(plugin.settings.classNameOpen).addClass(plugin.settings.classNameClosed).html(plugin.settings.subToggleNameClosed)}else if($(this).siblings("ul").hasClass("accessible-hide")){$(this).siblings("ul").accessibleShow();$(this).siblings("ul").hide().slideDown(animationSpeed,function(){$(this).removeAttr("style");if(plugin.settings.afterSubToggle){plugin.settings.afterSubToggle()}$(window).trigger("resize")});$(this).removeClass(plugin.settings.classNameClosed).addClass(plugin.settings.classNameOpen).html(plugin.settings.subToggleNameOpen)}})};plugin.init()};$.fn.responsiveMenu=function(options){return this.each(function(){if(undefined==$(this).data("responsiveMenu")){var plugin=new $.responsiveMenu(this,options);$(this).data("responsiveMenu",plugin)}})}})(jQuery);